apiVersion: argoproj.io/v1alpha1
kind: Application
metadata:
  name: root-app
  namespace: argocd
spec:
  project: default

  # –û—Ç–∫—É–¥–∞ –±—Ä–∞—Ç—å –º–∞–Ω–∏—Ñ–µ—Å—Ç—ã
  source:
    repoURL: https://github.com/Arni1197/test-Jenkins.git
    targetRevision: main       # üëà –í–°–ï–ì–î–ê —É–∫–∞–∑—ã–≤–∞–π main, –∞ –Ω–µ HEAD
    path: argocd               # üëà –ü–∞–ø–∫–∞, –≥–¥–µ –ª–µ–∂–∞—Ç –¥–æ—á–µ—Ä–Ω–∏–µ apps
    directory:
      recurse: true            # üëà –°–æ–±–∏—Ä–∞–µ—Ç –í–°–ï YAML –≤–Ω—É—Ç—Ä–∏ argocd/

  # –ö—É–¥–∞ –ø—Ä–∏–º–µ–Ω—è—Ç—å (—Å–∞–º root-app —Å–æ–∑–¥–∞—ë—Ç—Å—è –≤ –∫–ª–∞—Å—Ç–µ—Ä–µ –≤ namespace argocd)
  destination:
    server: https://kubernetes.default.svc
    namespace: argocd

  syncPolicy:
    automated:
      prune: true              # –£–¥–∞–ª—è—Ç—å –ª–∏—à–Ω–µ–µ, —á—Ç–æ –∏—Å—á–µ–∑–ª–æ –∏–∑ Git
      selfHeal: true           # –õ–µ—á–∏—Ç—å —Ä—É—á–Ω—ã–µ –∏–∑–º–µ–Ω–µ–Ω–∏—è –≤ –∫–ª–∞—Å—Ç–µ—Ä–µ
    syncOptions:
      - CreateNamespace=true   # –î–ª—è –¥–æ—á–µ—Ä–Ω–∏—Ö –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–π —Å–æ–∑–¥–∞–≤–∞—Ç—å ns